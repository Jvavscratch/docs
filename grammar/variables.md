# 变量和赋值

在 jvavscratch 中，变量的使用有一些特殊规则和约定，了解这些规则将帮助您更有效地编写代码。

## 变量声明

在 jvavscratch 中，您只能使用 `let` 关键字声明变量，不支持 `const` 关键字：

```js
let x = 10;  // 有效
// const y = 20;  // 无效，不支持 const
```

## 变量作用域

### 全局变量

默认情况下，所有变量都是全局的，这意味着它们可以在程序的任何部分访问：

```js
let score = 0;  // 全局变量

function increaseScore() {
  score = score + 10;  // 可以访问全局变量
}
```

### 局部变量

您可以通过在变量名前加上 `_l_` 前缀来声明局部变量，这些变量仅在其声明的作用域内可见：

```js
function calculateTotal() {
  let _l_total = 0;  // 局部变量
  // 计算逻辑...
  return _l_total;
}

// 在函数外部无法访问 _l_total
```

### 显式全局变量

虽然变量默认是全局的，但您也可以通过在变量名前加上 `_g_` 前缀来显式声明全局变量：

```js
let _g_counter = 0;  // 显式声明的全局变量
```

### 云变量

> **警告**：云变量当前已禁用。它们将被转换为 `global` 变量，并且 `_c_` 前缀将被移除。

在 Scratch 中，云变量是存储在服务器上的变量，可以在不同用户之间共享。在 jvavscratch 中，您可以通过在变量名前加上 `_c_` 前缀来声明云变量：

```js
let _c_onlineUsers = 0;  // 云变量（当前已禁用）
```

## 变量引用

声明变量后，您可以直接使用变量名来引用它，不需要包含前缀：

```js
let _l_privateVar = "这是私有变量";
console.log(privateVar);  // 输出: "这是私有变量"

let _g_globalVar = "这是全局变量";
console.log(globalVar);  // 输出: "这是全局变量"
```

## 列表引用

在 jvavscratch 中，您可以通过以下方式引用 Scratch 列表：

```js
// 引用名为 'example' 的列表（_list_ 将被省略）
let z = _list_example;
```

## 命名规则

- 避免使用与列表同名的变量，否则 sb3 将无法正确构建
- 不要对云变量、全局变量或局部变量使用相同的名称，这将导致构建失败
- 变量名应该有意义，描述变量的用途

## 最佳实践

1. 尽可能使用局部变量 (`_l_` 前缀) 来限制变量的作用域，避免变量冲突
2. 对于需要在多个函数间共享的变量，使用全局变量
3. 使用描述性的变量名，使代码更易于理解
4. 初始化变量时赋予合理的初始值